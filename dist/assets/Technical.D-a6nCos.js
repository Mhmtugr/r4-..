import{g as e,h as a,q as l,w as t,v as n,j as r,i as o,F as s,k as i,t as d,z as c,K as m,L as u,r as p,c as v,o as k,e as b}from"./vendor-vue.CBtg5bt5.js";import{b as y}from"./index.D8gGT4XT.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";const f={class:"technical-module"},D={class:"row"},g={class:"col-md-7"},w={class:"card"},R={class:"card-header d-flex justify-content-between align-items-center"},M={class:"card-body"},T={class:"input-group mb-3"},x={key:0,class:"list-group"},B={key:0,class:"text-center py-4"},C=["href"],j={class:"d-flex w-100 justify-content-between"},L={class:"mb-1"},I={class:"text-muted"},Q={class:"mb-1"},S={class:"text-muted"},K={key:1,class:"text-center py-4"},U={class:"col-md-5"},z={class:"card"},A={class:"card-body"},E={class:"mb-3"},V=["disabled"],F={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},G={key:1,class:"bi bi-search me-1"},N={key:0,class:"alert alert-info mt-3"},P={key:0,class:"mb-0"},Y=["href"],_={key:1,class:"mt-3"},q=["href"],W={class:"modal fade",id:"uploadDocumentModal",tabindex:"-1","aria-labelledby":"uploadDocumentModalLabel","aria-hidden":"true"},$={class:"modal-dialog"},H={class:"modal-content"},O={class:"modal-body"},Z={class:"mb-3"},J={class:"mb-3"},X={class:"mb-3"},ee={class:"mb-3"},ae={class:"text-end"},le=["disabled"],te={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"};const ne=h({name:"Technical",setup(){const{toast:e}=y(),a=function(){y();const e=[{id:"doc1",name:"RM 36 CB Teknik Çizim",revision:"2.1",date:"15.10.2024",author:"Ahmet Yılmaz",department:"Elektrik Tasarım",url:"#doc1"},{id:"doc2",name:"RM 36 LB Montaj Talimatı",revision:"1.3",date:"10.10.2024",author:"Mehmet Demir",department:"Mekanik Tasarım",url:"#doc2"},{id:"doc3",name:"RM 36 FL Test Prosedürü",revision:"3.0",date:"05.10.2024",author:"Ayşe Kaya",department:"Test Birimi",url:"#doc3"},{id:"doc4",name:"RMU Kablaj Şeması",revision:"1.5",date:"01.10.2024",author:"Fatma Şahin",department:"Kablaj Birimi",url:"#doc4"},{id:"doc5",name:"Genel Montaj Akış Şeması",revision:"1.0",date:"25.09.2024",author:"Ali Veli",department:"Üretim",url:"#doc5"}];return{getDocuments:async()=>{try{return await new Promise((e=>setTimeout(e,500))),[...e]}catch(a){throw new Error("Dokümanlar yüklenemedi: "+(a.message||"Bilinmeyen hata"))}},uploadDocument:async e=>{try{return await new Promise((e=>setTimeout(e,1e3))),{id:`doc${Date.now()}`,name:e.name,revision:e.revision,department:e.department,date:(new Date).toLocaleDateString("tr-TR"),author:"Mevcut Kullanıcı",url:"#new-doc"}}catch(a){throw new Error("Doküman yüklenemedi: "+(a.message||"Bilinmeyen hata"))}},submitQuery:async e=>{try{await new Promise((e=>setTimeout(e,1500)));const a=e.toLowerCase();let l={text:"Bu sorgu için demo cevap üretilemedi.",reference:"RM 36 Serisi Genel Teknik Şartname Rev.3.0",relatedDocIds:[]};return a.includes("akım trafosu")?l={text:"RM 36 CB hücresinde genellikle 200-400/5-5A 5P20 7,5/15VA veya 300-600/5-5A 5P20 7,5/15VA özelliklerinde toroidal tip akım trafoları kullanılmaktadır. Canias kodları: 144866% (KAP-80/190-95) veya 142227% (KAT-85/190-95).",reference:"RM 36 CB Teknik Şartnamesi Rev.2.1",relatedDocIds:["doc1","doc4"]}:a.includes("montaj")?l={text:"RM 36 LB hücresinin montajı için özel talimatlar bulunmaktadır. Mekanik montaj işlemleri için montaj talimatına göre işlem yapılmalıdır.",reference:"RM 36 LB Montaj Talimatı Rev.1.3",relatedDocIds:["doc2"]}:a.includes("bara")?l={text:"OG Hücrelerde kullanılan baralar genellikle elektrolitik bakırdır. RM 36 serisi için 582mm ve 432mm uzunluklarında 40x10mm kesitinde düz bakır baralar kullanılır. Stok kodları: 109367% (582mm) ve 109363% (432mm).",reference:"RM 36 Serisi Bara Montaj Kılavuzu Rev.1.8",relatedDocIds:[]}:(a.includes("motor")||a.includes("ayırıcı"))&&(l={text:"RM 36 serisi hücrelerde kesici ve ayırıcılarda 24VDC motorlar standart olarak kullanılmaktadır. Motor gücü ayırıcılar için 60W, kesiciler için 85W değerindedir. Çalışma süresi 3-5 saniye arasındadır.",reference:"RM 36 Motor Teknik Özellikleri Rev.1.2",relatedDocIds:[]}),l}catch(a){throw new Error("Teknik sorgu yapılamadı: "+(a.message||"Bilinmeyen hata"))}}}}(),l=p(!1),t=p([]),n=p(""),r=v((()=>{if(!n.value)return t.value;const e=n.value.toLowerCase().trim();return t.value.filter((a=>{var l,t,n;return(null==(l=a.name)?void 0:l.toLowerCase().includes(e))||(null==(t=a.department)?void 0:t.toLowerCase().includes(e))||(null==(n=a.author)?void 0:n.toLowerCase().includes(e))}))})),o=p(!1),s=p({name:"",revision:"1.0",department:"Genel",file:null}),i=p(""),d=p(!1),c=p(""),m=p(null),u=p([]),b=async()=>{l.value=!0;try{const e=await a.getDocuments();t.value=e}catch(n){e.error("Dokümanlar yüklenemedi: "+n.message)}finally{l.value=!1}};return k((()=>{b()})),{loading:l,documents:r,searchQuery:n,searchDocuments:()=>{},uploading:o,newDocument:s,handleFileSelected:e=>{const a=e.target.files[0];a&&(s.value.file=a)},openUploadModal:()=>{s.value={name:"",revision:"1.0",department:"Genel",file:null};const e=document.getElementById("upload-message");e&&(e.className="alert d-none",e.textContent="")},handleDocumentUpload:async()=>{const e=document.getElementById("upload-message");if(s.value.file&&s.value.name){o.value=!0,e&&(e.textContent="Doküman yükleniyor...",e.className="alert alert-info");try{await a.uploadDocument(s.value),e&&(e.textContent="Doküman başarıyla yüklendi.",e.className="alert alert-success"),await b(),setTimeout((()=>{const e=document.getElementById("uploadDocumentModal");if(e){const a=bootstrap.Modal.getInstance(e);a&&a.hide()}}),1500)}catch(l){e&&(e.textContent=`Yükleme başarısız: ${l.message}`,e.className="alert alert-danger")}finally{o.value=!1}}else e&&(e.textContent="Lütfen doküman adını ve dosyayı seçin.",e.className="alert alert-warning")},technicalQuery:i,queryLoading:d,aiResponse:c,aiResponseReference:m,relatedDocuments:u,submitTechnicalQuery:async()=>{if(i.value.trim()){d.value=!0,c.value="",m.value=null,u.value=[];try{const e=await a.submitQuery(i.value);c.value=e.text,m.value=e.reference?{name:e.reference,url:"#"}:null,e.relatedDocIds&&e.relatedDocIds.length>0&&(u.value=t.value.filter((a=>e.relatedDocIds.includes(a.id))))}catch(l){e.error("Sorgulama sırasında bir hata oluştu: "+l.message)}finally{d.value=!1}}}}}},[["render",function(p,v,k,y,h,ne){return b(),e("div",f,[a("div",D,[a("div",g,[a("div",w,[a("div",R,[v[12]||(v[12]=a("h5",{class:"mb-0"},"Teknik Dokümanlar",-1)),a("button",{class:"btn btn-sm btn-primary","data-bs-toggle":"modal","data-bs-target":"#uploadDocumentModal",onClick:v[0]||(v[0]=(...e)=>y.openUploadModal&&y.openUploadModal(...e))},v[11]||(v[11]=[a("i",{class:"bi bi-cloud-upload me-1"},null,-1),l(" Doküman Yükle ")]))]),a("div",M,[a("div",T,[t(a("input",{type:"text",class:"form-control","onUpdate:modelValue":v[1]||(v[1]=e=>y.searchQuery=e),placeholder:"Doküman ara...",onKeyup:v[2]||(v[2]=r(((...e)=>y.searchDocuments&&y.searchDocuments(...e)),["enter"]))},null,544),[[n,y.searchQuery]]),a("button",{class:"btn btn-outline-secondary",type:"button",onClick:v[3]||(v[3]=(...e)=>y.searchDocuments&&y.searchDocuments(...e))},v[13]||(v[13]=[a("i",{class:"bi bi-search"},null,-1)]))]),y.loading?(b(),e("div",K,v[15]||(v[15]=[a("div",{class:"spinner-border text-primary",role:"status"},[a("span",{class:"visually-hidden"},"Yükleniyor...")],-1),a("p",{class:"mt-2"},"Dokümanlar yükleniyor...",-1)]))):(b(),e("div",x,[0===y.documents.length?(b(),e("div",B,v[14]||(v[14]=[a("p",{class:"text-muted"},"Doküman bulunamadı.",-1)]))):o("",!0),(b(!0),e(s,null,i(y.documents,(l=>(b(),e("a",{key:l.id,href:l.url||"#",class:"list-group-item list-group-item-action",target:"_blank",rel:"noopener noreferrer"},[a("div",j,[a("h6",L,d(l.name),1),a("small",I,d(l.date||"-"),1)]),a("p",Q,"Rev. "+d(l.revision||"-")+" - Son güncelleme: "+d(l.author||"-"),1),a("small",S,d(l.department||"-"),1)],8,C)))),128))]))])])]),a("div",U,[a("div",z,[v[21]||(v[21]=a("div",{class:"card-header"},[a("h5",{class:"mb-0"},"Teknik Sorgulama")],-1)),a("div",A,[a("div",E,[v[16]||(v[16]=a("label",{for:"technicalQuestion",class:"form-label"},"Teknik Soru",-1)),t(a("textarea",{class:"form-control",id:"technicalQuestion","onUpdate:modelValue":v[4]||(v[4]=e=>y.technicalQuery=e),rows:"3",placeholder:"Örn: RM 36 CB hücresinde hangi akım trafoları kullanılır?"},null,512),[[n,y.technicalQuery]])]),a("button",{class:"btn btn-primary",onClick:v[5]||(v[5]=(...e)=>y.submitTechnicalQuery&&y.submitTechnicalQuery(...e)),disabled:y.queryLoading},[y.queryLoading?(b(),e("span",F)):(b(),e("i",G)),v[17]||(v[17]=l(" Sorgula "))],8,V),y.aiResponse?(b(),e("div",N,[v[19]||(v[19]=a("h6",null,[a("i",{class:"bi bi-lightbulb"}),l(" Yapay Zeka Cevabı:")],-1)),a("p",null,d(y.aiResponse),1),y.aiResponseReference?(b(),e("p",P,[v[18]||(v[18]=l("Referans doküman: ")),a("a",{href:y.aiResponseReference.url||"#"},d(y.aiResponseReference.name),9,Y)])):o("",!0)])):o("",!0),y.relatedDocuments&&y.relatedDocuments.length>0?(b(),e("div",_,[v[20]||(v[20]=a("h6",null,"İlgili Dokümanlar:",-1)),a("ul",null,[(b(!0),e(s,null,i(y.relatedDocuments,(t=>(b(),e("li",{key:t.id},[a("a",{href:t.url||"#",target:"_blank",rel:"noopener noreferrer"},d(t.name),9,q),l(" - Rev."+d(t.revision||"-"),1)])))),128))])])):o("",!0)])])])]),a("div",W,[a("div",$,[a("div",H,[v[30]||(v[30]=a("div",{class:"modal-header"},[a("h5",{class:"modal-title",id:"uploadDocumentModalLabel"},"Teknik Doküman Yükle"),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Kapat"})],-1)),a("div",O,[a("form",{id:"upload-document-form",onSubmit:v[10]||(v[10]=c(((...e)=>y.handleDocumentUpload&&y.handleDocumentUpload(...e)),["prevent"]))},[v[29]||(v[29]=a("div",{id:"upload-message",class:"alert d-none"},null,-1)),a("div",Z,[v[22]||(v[22]=a("label",{for:"docName",class:"form-label"},"Doküman Adı",-1)),t(a("input",{type:"text",class:"form-control",id:"docName","onUpdate:modelValue":v[6]||(v[6]=e=>y.newDocument.name=e),required:""},null,512),[[n,y.newDocument.name]])]),a("div",J,[v[23]||(v[23]=a("label",{for:"docRevision",class:"form-label"},"Revizyon",-1)),t(a("input",{type:"text",class:"form-control",id:"docRevision","onUpdate:modelValue":v[7]||(v[7]=e=>y.newDocument.revision=e),placeholder:"Örn: 1.0"},null,512),[[n,y.newDocument.revision]])]),a("div",X,[v[25]||(v[25]=a("label",{for:"docDepartment",class:"form-label"},"Departman",-1)),t(a("select",{class:"form-control",id:"docDepartment","onUpdate:modelValue":v[8]||(v[8]=e=>y.newDocument.department=e)},v[24]||(v[24]=[u('<option value="Elektrik Tasarım" data-v-af2e48fa>Elektrik Tasarım</option><option value="Mekanik Tasarım" data-v-af2e48fa>Mekanik Tasarım</option><option value="Test Birimi" data-v-af2e48fa>Test Birimi</option><option value="Kablaj Birimi" data-v-af2e48fa>Kablaj Birimi</option><option value="Üretim" data-v-af2e48fa>Üretim</option><option value="Genel" data-v-af2e48fa>Genel</option>',6)]),512),[[m,y.newDocument.department]])]),a("div",ee,[v[26]||(v[26]=a("label",{for:"docFile",class:"form-label"},"Dosya",-1)),a("input",{type:"file",class:"form-control",id:"docFile",onChange:v[9]||(v[9]=(...e)=>y.handleFileSelected&&y.handleFileSelected(...e)),required:""},null,32)]),a("div",ae,[v[28]||(v[28]=a("button",{type:"button",class:"btn btn-secondary me-2","data-bs-dismiss":"modal"},"İptal",-1)),a("button",{type:"submit",class:"btn btn-primary",id:"upload-doc-btn",disabled:y.uploading},[y.uploading?(b(),e("span",te)):o("",!0),v[27]||(v[27]=l(" Yükle "))],8,le)])],32)])])])])])}],["__scopeId","data-v-af2e48fa"]]);export{ne as default};
