import{r as e,c as a,g as r,h as l,L as s,i,z as t,w as n,v as o,Q as d,n as u,O as p,q as c,K as m,t as b,u as v,e as f}from"./vendor-vue.CBtg5bt5.js";import{b as g,u as y,_ as w}from"./index.D8gGT4XT.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";const k={class:"login-container"},x={class:"login-wrapper"},z={class:"card login-card border-0"},K={class:"card-body p-4 p-lg-5"},G={key:0},L={class:"mb-4"},S={class:"input-group input-group-lg"},E={class:"mb-4"},U={class:"d-flex justify-content-between align-items-center mb-1"},q={class:"input-group input-group-lg"},M=["type"],V={class:"mb-4"},T={class:"form-check"},_={class:"d-grid gap-2 mb-4"},C=["disabled"],D={key:0,class:"spinner-border spinner-border-sm me-2"},P={class:"d-grid gap-3 mb-4"},Y=["disabled"],A=["disabled"],j={class:"text-center"},H={class:"mb-0"},O={key:1},$={class:"mb-3"},B={class:"input-group"},N={class:"mb-3"},F={class:"input-group"},I={class:"mb-3"},Q={class:"input-group"},W={class:"mb-3"},Z={class:"input-group"},J={class:"mb-3"},R={class:"input-group"},X={class:"mb-4"},ee={class:"input-group"},ae={key:0,class:"form-text text-danger"},re={class:"d-grid gap-2 mb-4"},le=["disabled"],se={key:0,class:"spinner-border spinner-border-sm me-2"},ie={class:"text-center"},te={class:"mb-0"},ne={key:2},oe={class:"mb-4"},de={class:"input-group input-group-lg"},ue={class:"d-grid gap-2 mb-4"},pe=["disabled"],ce={key:0,class:"spinner-border spinner-border-sm me-2"},me={class:"text-center"},be={class:"mb-0"},ve={class:"text-center text-muted mt-3 footer-info"},fe={class:"mb-1"},ge=h({__name:"Login",setup(h){const ge=v(),{toast:ye}=g(),we=y(),he=e("login"),ke=e(!1),xe=e(!1),ze=e({email:"",password:"",rememberMe:!1}),Ke=e({name:"",email:"",username:"",department:"",password:"",confirmPassword:""}),Ge=e({email:""}),Le=a((()=>""!==Ke.value.password&&""!==Ke.value.confirmPassword&&Ke.value.password!==Ke.value.confirmPassword)),Se=async()=>{if(ze.value.email&&ze.value.password){ke.value=!0;try{const e=await we.login({email:ze.value.email,password:ze.value.password,rememberMe:ze.value.rememberMe});e.success?(ye.success(`Hoş geldiniz, ${e.user.displayName||e.user.email}`),ge.push("/")):ye.error(e.error||"Giriş başarısız oldu. Lütfen bilgilerinizi kontrol ediniz.")}catch(e){ye.error("Giriş yapılırken bir hata oluştu")}finally{ke.value=!1}}else ye.warning("Lütfen e-posta ve şifrenizi giriniz.")},Ee=async()=>{if(Le.value)ye.warning("Şifreler eşleşmiyor. Lütfen kontrol ediniz.");else if(Ke.value.name&&Ke.value.email&&Ke.value.username&&Ke.value.department&&Ke.value.password){ke.value=!0;try{const e=await we.register({name:Ke.value.name,email:Ke.value.email,username:Ke.value.username,department:Ke.value.department,password:Ke.value.password});e.success?(ye.success("Kayıt işlemi başarılı! Giriş yapabilirsiniz."),he.value="login",ze.value.email=Ke.value.email,Ke.value={name:"",email:"",username:"",department:"",password:"",confirmPassword:""}):ye.error(e.error||"Kayıt işlemi başarısız oldu. Lütfen tekrar deneyiniz.")}catch(e){ye.error("Kayıt olurken bir hata oluştu")}finally{ke.value=!1}}else ye.warning("Lütfen tüm alanları doldurunuz.")},Ue=async()=>{if(Ge.value.email){ke.value=!0;try{const e=await we.resetPassword(Ge.value.email);e.success?(ye.success(`${Ge.value.email} adresine şifre sıfırlama bağlantısı gönderildi.`),he.value="login",Ge.value.email=""):ye.error(e.error||"Şifre sıfırlama işlemi başarısız oldu. Lütfen tekrar deneyiniz.")}catch(e){ye.error("Şifre sıfırlama işlemi sırasında bir hata oluştu")}finally{ke.value=!1}}else ye.warning("Lütfen e-posta adresinizi giriniz.")},qe=async()=>{ke.value=!0;try{const e=await we.loginWithGoogle();e.success?(ye.success(`Hoş geldiniz, ${e.user.displayName||e.user.email}`),ge.push("/")):"auth/popup-closed-by-user"===e.code||ye.error(e.error||"Google ile giriş başarısız oldu. Lütfen tekrar deneyiniz.")}catch(e){ye.error("Google ile giriş yapılırken bir hata oluştu")}finally{ke.value=!1}},Me=async()=>{ke.value=!0;try{const e=await we.demoLogin();e.success?(ye.info("Demo modunda giriş yapıldı. Tam yetkiye sahipsiniz."),ge.push("/")):ye.error(e.error||"Demo giriş başarısız oldu. Lütfen tekrar deneyiniz.")}catch(e){ye.error("Demo giriş yapılırken bir hata oluştu")}finally{ke.value=!1}};return(e,a)=>(f(),r("div",k,[a[51]||(a[51]=l("div",{class:"login-bg"},null,-1)),l("div",x,[l("div",z,[a[49]||(a[49]=s('<div class="card-header bg-transparent text-center py-4 border-0" data-v-4b2ffdf3><div class="logo-container mb-3" data-v-4b2ffdf3><img src="'+w+'" alt="METS Logo" class="logo-img" data-v-4b2ffdf3></div><h3 class="brand-title" data-v-4b2ffdf3>METS</h3><p class="text-muted" data-v-4b2ffdf3>Mehmet Endüstriyel Takip Sistemi</p></div>',1)),l("div",K,["login"===he.value?(f(),r("div",G,[a[24]||(a[24]=l("h4",{class:"card-title text-center mb-4"},"Giriş Yap",-1)),l("form",{onSubmit:t(Se,["prevent"])},[l("div",L,[a[16]||(a[16]=l("label",{for:"email",class:"form-label"},"E-posta",-1)),l("div",S,[a[15]||(a[15]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-envelope"})],-1)),n(l("input",{type:"email",class:"form-control border-start-0",id:"email","onUpdate:modelValue":a[0]||(a[0]=e=>ze.value.email=e),placeholder:"E-posta adresiniz",required:""},null,512),[[o,ze.value.email]])])]),l("div",E,[l("div",U,[a[17]||(a[17]=l("label",{for:"password",class:"form-label"},"Şifre",-1)),l("a",{href:"#",onClick:a[1]||(a[1]=t((e=>he.value="forgot"),["prevent"])),class:"text-decoration-none small"}," Şifremi Unuttum? ")]),l("div",q,[a[18]||(a[18]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-lock"})],-1)),n(l("input",{type:xe.value?"text":"password",class:"form-control border-start-0 border-end-0",id:"password","onUpdate:modelValue":a[2]||(a[2]=e=>ze.value.password=e),placeholder:"Şifreniz",required:""},null,8,M),[[d,ze.value.password]]),l("button",{class:"input-group-text bg-transparent border-start-0",type:"button",onClick:a[3]||(a[3]=e=>xe.value=!xe.value)},[l("i",{class:u(xe.value?"bi bi-eye-slash":"bi bi-eye")},null,2)])])]),l("div",V,[l("div",T,[n(l("input",{type:"checkbox",class:"form-check-input",id:"remember-me","onUpdate:modelValue":a[4]||(a[4]=e=>ze.value.rememberMe=e)},null,512),[[p,ze.value.rememberMe]]),a[19]||(a[19]=l("label",{class:"form-check-label",for:"remember-me"}," Beni hatırla ",-1))])]),l("div",_,[l("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:ke.value},[ke.value?(f(),r("span",D)):i("",!0),a[20]||(a[20]=l("span",null,"Giriş Yap",-1))],8,C)])],32),a[25]||(a[25]=l("div",{class:"social-divider"},[l("span",null,"veya")],-1)),l("div",P,[l("button",{type:"button",class:"btn btn-outline-secondary btn-lg social-btn",onClick:qe,disabled:ke.value},a[21]||(a[21]=[l("i",{class:"bi bi-google me-2"},null,-1),c(" Google ile Giriş Yap ")]),8,Y),l("button",{type:"button",class:"btn btn-outline-info btn-lg social-btn",onClick:Me,disabled:ke.value},a[22]||(a[22]=[l("i",{class:"bi bi-person-circle me-2"},null,-1),c(" Demo Kullanıcı ile Giriş ")]),8,A)]),l("div",j,[l("p",H,[a[23]||(a[23]=c(" Hesabınız yok mu? ")),l("a",{href:"#",onClick:a[5]||(a[5]=t((e=>he.value="register"),["prevent"])),class:"ms-1 text-decoration-none fw-bold"}," Kayıt Ol ")])])])):"register"===he.value?(f(),r("div",O,[a[42]||(a[42]=l("h4",{class:"card-title text-center mb-4"},"Hesap Oluştur",-1)),l("form",{onSubmit:t(Ee,["prevent"])},[l("div",$,[a[27]||(a[27]=l("label",{for:"register-name",class:"form-label"},"Ad Soyad",-1)),l("div",B,[a[26]||(a[26]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-person"})],-1)),n(l("input",{type:"text",class:"form-control border-start-0",id:"register-name","onUpdate:modelValue":a[6]||(a[6]=e=>Ke.value.name=e),placeholder:"Ad Soyad",required:""},null,512),[[o,Ke.value.name]])])]),l("div",N,[a[29]||(a[29]=l("label",{for:"register-email",class:"form-label"},"E-posta",-1)),l("div",F,[a[28]||(a[28]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-envelope"})],-1)),n(l("input",{type:"email",class:"form-control border-start-0",id:"register-email","onUpdate:modelValue":a[7]||(a[7]=e=>Ke.value.email=e),placeholder:"E-posta adresiniz",required:""},null,512),[[o,Ke.value.email]])])]),l("div",I,[a[31]||(a[31]=l("label",{for:"register-username",class:"form-label"},"Kullanıcı Adı",-1)),l("div",Q,[a[30]||(a[30]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-at"})],-1)),n(l("input",{type:"text",class:"form-control border-start-0",id:"register-username","onUpdate:modelValue":a[8]||(a[8]=e=>Ke.value.username=e),placeholder:"Kullanıcı adınız",required:""},null,512),[[o,Ke.value.username]])])]),l("div",W,[a[34]||(a[34]=l("label",{for:"register-department",class:"form-label"},"Departman",-1)),l("div",Z,[a[33]||(a[33]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-building"})],-1)),n(l("select",{class:"form-select border-start-0",id:"register-department","onUpdate:modelValue":a[9]||(a[9]=e=>Ke.value.department=e),required:""},a[32]||(a[32]=[s('<option value="" disabled selected data-v-4b2ffdf3>Departmanınızı seçin</option><option value="Yönetim" data-v-4b2ffdf3>Yönetim</option><option value="Teknik" data-v-4b2ffdf3>Teknik</option><option value="Üretim" data-v-4b2ffdf3>Üretim</option><option value="Satın Alma" data-v-4b2ffdf3>Satın Alma</option><option value="Kalite Kontrol" data-v-4b2ffdf3>Kalite Kontrol</option><option value="İnsan Kaynakları" data-v-4b2ffdf3>İnsan Kaynakları</option>',7)]),512),[[m,Ke.value.department]])])]),l("div",J,[a[36]||(a[36]=l("label",{for:"register-password",class:"form-label"},"Şifre",-1)),l("div",R,[a[35]||(a[35]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-lock"})],-1)),n(l("input",{type:"password",class:"form-control border-start-0",id:"register-password","onUpdate:modelValue":a[10]||(a[10]=e=>Ke.value.password=e),placeholder:"Şifre (en az 6 karakter)",required:"",minlength:"6"},null,512),[[o,Ke.value.password]])])]),l("div",X,[a[39]||(a[39]=l("label",{for:"register-password-confirm",class:"form-label"},"Şifre Tekrar",-1)),l("div",ee,[a[37]||(a[37]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-lock-fill"})],-1)),n(l("input",{type:"password",class:"form-control border-start-0",id:"register-password-confirm","onUpdate:modelValue":a[11]||(a[11]=e=>Ke.value.confirmPassword=e),placeholder:"Şifrenizi tekrar girin",required:""},null,512),[[o,Ke.value.confirmPassword]])]),Le.value?(f(),r("div",ae,a[38]||(a[38]=[l("i",{class:"bi bi-exclamation-triangle me-1"},null,-1),c(" Şifreler eşleşmiyor ")]))):i("",!0)]),l("div",re,[l("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:ke.value||Le.value},[ke.value?(f(),r("span",se)):i("",!0),a[40]||(a[40]=c(" Kayıt Ol "))],8,le)])],32),l("div",ie,[l("p",te,[a[41]||(a[41]=c(" Zaten hesabınız var mı? ")),l("a",{href:"#",onClick:a[12]||(a[12]=t((e=>he.value="login"),["prevent"])),class:"ms-1 text-decoration-none fw-bold"}," Giriş Yap ")])])])):"forgot"===he.value?(f(),r("div",ne,[a[47]||(a[47]=l("h4",{class:"card-title text-center mb-4"},"Şifremi Unuttum",-1)),a[48]||(a[48]=l("p",{class:"text-muted text-center mb-4"},"E-posta adresinizi giriniz. Şifre sıfırlama bağlantısı gönderilecektir.",-1)),l("form",{onSubmit:t(Ue,["prevent"])},[l("div",oe,[a[44]||(a[44]=l("label",{for:"forgot-email",class:"form-label"},"E-posta",-1)),l("div",de,[a[43]||(a[43]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-envelope"})],-1)),n(l("input",{type:"email",class:"form-control border-start-0",id:"forgot-email","onUpdate:modelValue":a[13]||(a[13]=e=>Ge.value.email=e),placeholder:"E-posta adresiniz",required:""},null,512),[[o,Ge.value.email]])])]),l("div",ue,[l("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:ke.value},[ke.value?(f(),r("span",ce)):i("",!0),a[45]||(a[45]=c(" Şifre Sıfırlama Bağlantısı Gönder "))],8,pe)])],32),l("div",me,[l("p",be,[l("a",{href:"#",onClick:a[14]||(a[14]=t((e=>he.value="login"),["prevent"])),class:"text-decoration-none"},a[46]||(a[46]=[l("i",{class:"bi bi-arrow-left me-1"},null,-1),c(" Giriş sayfasına dön ")]))])])])):i("",!0)])]),l("div",ve,[l("p",fe,"© "+b((new Date).getFullYear())+" METS - MehmetEndüstriyelTakip Sistemi",1),a[50]||(a[50]=l("p",{class:"mb-0 small"},"v2.0.0",-1))])])]))}},[["__scopeId","data-v-4b2ffdf3"]]);export{ge as default};
