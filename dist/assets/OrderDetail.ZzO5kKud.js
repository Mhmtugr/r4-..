import{r as e,G as a,c as t,s as l,u as s,o as r,g as i,i as o,M as d,h as n,t as c,l as u,q as m,m as p,b as v,n as b,N as y,w as g,v as f,K as w,F as k,k as D,e as h}from"./vendor-vue.CBtg5bt5.js";import{b as S}from"./index.D8gGT4XT.js";import{_ as T}from"./_plugin-vue_export-helper.BCo6x5W8.js";function N(){const{showToast:r}=S(),i=l(),o=s(),d=e(null),n=e(!1),c=e(!1),u=e([]),m=e([]),p=a({deliveryDate:"",priority:"",status:"",customerContact:"",notes:""}),v=t((()=>i.params.id||"")),b=t((()=>d.value&&d.value.progress||0)),y=t((()=>d.value&&d.value.cells?d.value.cells.reduce(((e,a)=>e+(a.quantity||0)),0):0));async function g(e=null){var a,t;const l=e||v.value;if(!l)return r("Sipariş ID bulunamadı","error"),null;try{if(n.value=!0,window.firebase&&window.firebase.firestore){const e=await window.firebase.firestore().collection("orders").doc(l).get();if(e.exists){const s={id:e.id,...e.data(),createdAt:(null==(a=e.data().createdAt)?void 0:a.toDate())||new Date,updatedAt:(null==(t=e.data().updatedAt)?void 0:t.toDate())||new Date};return d.value=s,k(),await f(l),await w(l),s}return r("Sipariş bulunamadı","error"),null}return d.value=function(e){return[{id:"order-001",orderNo:"#0424-1251",orderDate:"2024-04-01",customerInfo:{name:"AYEDAŞ",documentNo:"PO-2024-A156",projectName:"İstanbul OG Yenileme Projesi",contractNo:"CNT-24156",contactPerson:"Ahmet Yılmaz",contactEmail:"ahmet.yilmaz@ayedas.com",contactPhone:"+90 532 123 45 67"},cells:[{id:1,productTypeCode:"RM 36 CB",technicalValues:"36kV 630A 16kA Kesicili ÇIKIŞ Hücresi",quantity:1,deliveryDate:"2024-11-15",serialNumber:"SN-24251-001"}],projects:[{id:1,name:"PROJE-1",cellArrangement:"Sıralı Montaj",closingDetails:"Standard"}],status:"delayed",progress:65,priority:"high",notes:"Kesici malzemesi tedarikinde gecikme yaşanıyor",createdAt:new Date("2024-04-01"),updatedAt:new Date("2024-04-15")},{id:"order-002",orderNo:"#0424-1245",orderDate:"2024-04-05",customerInfo:{name:"BEDAŞ",documentNo:"PO-2024-B789",projectName:"Bakırköy Dağıtım Merkezi",contractNo:"CNT-24789",contactPerson:"Mehmet Demir",contactEmail:"mehmet.demir@bedas.com",contactPhone:"+90 533 234 56 78"},cells:[{id:1,productTypeCode:"RM 36 LB",technicalValues:"36kV 630A 16kA Yük Ayırıcılı Giriş Hücresi",quantity:2,deliveryDate:"2024-11-20",serialNumber:"SN-24245-001"},{id:2,productTypeCode:"RM 36 CB",technicalValues:"36kV 630A 16kA Kesicili ÇIKIŞ Hücresi",quantity:3,deliveryDate:"2024-11-20",serialNumber:"SN-24245-002"}],status:"in_progress",progress:35,priority:"medium",notes:"",createdAt:new Date("2024-04-05"),updatedAt:new Date("2024-04-10")}].find((a=>a.id===e))||null}(l),k(),u.value=D(l),m.value=h(l),d.value}catch(s){return r("Sipariş detayları yüklenemedi: "+s.message,"error"),null}finally{n.value=!1}}async function f(e){try{if(window.firebase&&window.firebase.firestore){const a=await window.firebase.firestore().collection("productionStages").where("orderId","==",e).orderBy("startDate","asc").get(),t=[];return a.forEach((e=>{var a,l;t.push({id:e.id,...e.data(),startDate:(null==(a=e.data().startDate)?void 0:a.toDate())||null,endDate:(null==(l=e.data().endDate)?void 0:l.toDate())||null})})),u.value=t,t}return u.value=D(e),u.value}catch(a){return r("Üretim aşamaları yüklenemedi","error"),u.value=D(e),u.value}}async function w(e){try{if(window.firebase&&window.firebase.firestore){const a=await window.firebase.firestore().collection("orderDocuments").where("orderId","==",e).orderBy("createdAt","desc").get(),t=[];return a.forEach((e=>{var a;t.push({id:e.id,...e.data(),createdAt:(null==(a=e.data().createdAt)?void 0:a.toDate())||new Date})})),m.value=t,t}return m.value=h(e),m.value}catch(a){return r("Dokümanlar yüklenemedi","error"),m.value=h(e),m.value}}function k(){var e,a,t;d.value&&(p.deliveryDate=(null==(a=null==(e=d.value.cells)?void 0:e[0])?void 0:a.deliveryDate)||"",p.priority=d.value.priority||"medium",p.status=d.value.status||"planned",p.customerContact=(null==(t=d.value.customerInfo)?void 0:t.contactPerson)||"",p.notes=d.value.notes||"")}function D(e){return"order-001"===e?[{id:"stage-001",orderId:"order-001",stageName:"Mekanik Tasarım",status:"completed",progress:100,startDate:new Date("2024-04-03"),endDate:new Date("2024-04-08"),assignedTo:"Ali Yıldız"},{id:"stage-002",orderId:"order-001",stageName:"Mekanik Üretim",status:"completed",progress:100,startDate:new Date("2024-04-09"),endDate:new Date("2024-04-18"),assignedTo:"Üretim Ekibi A"},{id:"stage-003",orderId:"order-001",stageName:"Elektrik Tasarım",status:"completed",progress:100,startDate:new Date("2024-04-10"),endDate:new Date("2024-04-15"),assignedTo:"Ayşe Kaya"},{id:"stage-004",orderId:"order-001",stageName:"Kablaj",status:"in_progress",progress:75,startDate:new Date("2024-04-19"),endDate:null,assignedTo:"Kablaj Ekibi C"},{id:"stage-005",orderId:"order-001",stageName:"Test",status:"not_started",progress:0,startDate:null,endDate:null,assignedTo:"Test Ekibi"}]:"order-002"===e?[{id:"stage-006",orderId:"order-002",stageName:"Mekanik Tasarım",status:"completed",progress:100,startDate:new Date("2024-04-06"),endDate:new Date("2024-04-12"),assignedTo:"Ali Yıldız"},{id:"stage-007",orderId:"order-002",stageName:"Elektrik Tasarım",status:"completed",progress:100,startDate:new Date("2024-04-13"),endDate:new Date("2024-04-18"),assignedTo:"Ayşe Kaya"},{id:"stage-008",orderId:"order-002",stageName:"Mekanik Üretim",status:"in_progress",progress:30,startDate:new Date("2024-04-19"),endDate:null,assignedTo:"Üretim Ekibi B"}]:[]}function h(e){return"order-001"===e?[{id:"doc-001",orderId:"order-001",fileName:"Sipariş-0424-1251-Sözleşme.pdf",fileType:"application/pdf",fileSize:1245678,documentType:"contract",createdAt:new Date("2024-04-01"),createdBy:"Satış Departmanı",downloadUrl:"#"},{id:"doc-002",orderId:"order-001",fileName:"Teknik-Şartname.docx",fileType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",fileSize:458963,documentType:"technical",createdAt:new Date("2024-04-02"),createdBy:"Teknik Departman",downloadUrl:"#"},{id:"doc-003",orderId:"order-001",fileName:"Hücre-Teknik-Çizim.dwg",fileType:"application/acad",fileSize:2589631,documentType:"drawing",createdAt:new Date("2024-04-08"),createdBy:"Tasarım Departmanı",downloadUrl:"#"}]:"order-002"===e?[{id:"doc-004",orderId:"order-002",fileName:"Sipariş-0424-1245-Sözleşme.pdf",fileType:"application/pdf",fileSize:1123456,documentType:"contract",createdAt:new Date("2024-04-05"),createdBy:"Satış Departmanı",downloadUrl:"#"},{id:"doc-005",orderId:"order-002",fileName:"Müşteri-Teknik-Gereksinimleri.pdf",fileType:"application/pdf",fileSize:852741,documentType:"technical",createdAt:new Date("2024-04-07"),createdBy:"Müşteri",downloadUrl:"#"}]:[]}return v.value&&g(),{order:d,isLoading:n,isEditing:c,productionStages:u,documents:m,editForm:p,orderId:v,orderProgress:b,orderCellCount:y,loadOrderDetail:g,loadProductionStages:f,loadOrderDocuments:w,startEditing:function(){k(),c.value=!0},cancelEditing:function(){c.value=!1},saveChanges:async function(){if(!d.value)return!1;try{n.value=!0;const e={status:p.status,priority:p.priority,notes:p.notes,updatedAt:new Date};return p.customerContact&&(e.customerInfo={...d.value.customerInfo,contactPerson:p.customerContact}),p.deliveryDate&&d.value.cells&&d.value.cells.length>0&&(e.cells=[...d.value.cells],e.cells[0].deliveryDate=p.deliveryDate),window.firebase&&window.firebase.firestore?await window.firebase.firestore().collection("orders").doc(d.value.id).update({...e,updatedAt:window.firebase.firestore.FieldValue.serverTimestamp()}):d.value={...d.value,...e},c.value=!1,r("Değişiklikler kaydedildi","success"),!0}catch(e){return r("Değişiklikler kaydedilemedi: "+e.message,"error"),!1}finally{n.value=!1}},deleteOrder:async function(){if(!d.value)return!1;try{return n.value=!0,window.firebase&&window.firebase.firestore&&await window.firebase.firestore().collection("orders").doc(d.value.id).delete(),r("Sipariş silindi","success"),o.push({name:"Orders"}),!0}catch(e){return r("Sipariş silinemedi: "+e.message,"error"),!1}finally{n.value=!1}},cloneOrder:async function(){if(!d.value)return null;try{n.value=!0;const e={...d.value,orderNo:`#${(new Date).toISOString().slice(0,10).replace(/-/g,"")}-${Math.floor(1e3*Math.random())}`,orderDate:(new Date).toISOString().split("T")[0],status:"planned",progress:0,createdAt:new Date,updatedAt:new Date};if(delete e.id,window.firebase&&window.firebase.firestore){const a=await window.firebase.firestore().collection("orders").add({...e,createdAt:window.firebase.firestore.FieldValue.serverTimestamp(),updatedAt:window.firebase.firestore.FieldValue.serverTimestamp()});return r("Sipariş kopyalandı","success"),o.push({name:"OrderDetail",params:{id:a.id}}),a.id}{r("Demo mod: Sipariş kopyalandı (simülasyon)","success");const e="order-"+Date.now();return o.push({name:"Orders"}),e}}catch(e){return r("Sipariş kopyalanamadı: "+e.message,"error"),null}finally{n.value=!1}},getStatusText:function(e){return{planned:"Planlandı",in_progress:"Devam Ediyor",delayed:"Gecikiyor",completed:"Tamamlandı",canceled:"İptal Edildi"}[e]||e},getStatusBadgeClass:function(e){return{planned:"status-badge status-planned",in_progress:"status-badge status-progress",delayed:"status-badge status-delayed",completed:"status-badge status-completed",canceled:"status-badge status-canceled"}[e]||""}}}const A={class:"order-detail"},C={key:0,class:"text-center py-5"},I={key:1,class:"alert alert-warning"},B={key:2},z={class:"d-flex justify-content-between align-items-start mb-4"},x={class:"text-muted"},E={class:"d-flex gap-2"},M={class:"card mb-4"},O={class:"card-body"},P={class:"row"},_={class:"col-md-3"},j={class:"d-flex align-items-center"},K={class:"col-md-6"},V={class:"d-flex align-items-center"},U={class:"progress flex-grow-1"},Y=["aria-valuenow"],F={class:"col-md-3"},H={class:"d-flex align-items-center"},R={key:0,class:"card mb-4"},G={class:"card-body"},L={class:"row mb-3"},q={class:"col-md-4"},$={class:"col-md-4"},J={class:"col-md-4"},Q={class:"row mb-3"},W={class:"col-md-6"},X={class:"col-md-6"},Z={class:"d-flex gap-2 justify-content-end"},ee=["disabled"],ae={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},te={class:"row"},le={class:"col-lg-6"},se={class:"card mb-4"},re={class:"card-body"},ie={class:"row mb-2"},oe={class:"col-sm-8"},de={class:"row mb-2"},ne={class:"col-sm-8"},ce={class:"row mb-2"},ue={class:"col-sm-8"},me={class:"row mb-2"},pe={class:"col-sm-8"},ve={class:"row mb-2"},be={class:"col-sm-8"},ye={class:"row mb-2"},ge={class:"col-sm-8"},fe={class:"row"},we={class:"col-sm-8"},ke={class:"col-lg-6"},De={class:"card mb-4"},he={class:"card-header d-flex justify-content-between align-items-center"},Se={class:"badge bg-primary"},Te={class:"card-body"},Ne={key:0,class:"alert alert-info"},Ae={key:1,class:"table-responsive"},Ce={class:"table table-sm"},Ie={class:"card mb-4"},Be={class:"card-body"},ze={key:0,class:"alert alert-info"},xe={key:1,class:"table-responsive"},Ee={class:"table"},Me={class:"progress"},Oe=["aria-valuenow"],Pe={class:"card mb-4"},_e={class:"card-body"},je={key:0,class:"alert alert-info"},Ke={key:1,class:"table-responsive"},Ve={class:"table"},Ue=["href"],Ye={class:"card mb-4"},Fe={class:"card-body"},He={key:0,class:"mb-0"},Re={key:1,class:"text-muted mb-0"},Ge={key:3,class:"modal fade show",style:{display:"block"}},Le={class:"modal-dialog"},qe={class:"modal-content"},$e={class:"modal-header"},Je={class:"modal-body"},Qe={class:"modal-footer"},We=["disabled"],Xe={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},Ze={key:4,class:"modal fade show",style:{display:"block"}},ea={class:"modal-dialog"},aa={class:"modal-content"},ta={class:"modal-header"},la={class:"modal-body"},sa={class:"modal-footer"},ra=["disabled"],ia={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},oa=T({__name:"OrderDetail",setup(a){const t=s(),{order:l,isLoading:S,isEditing:T,productionStages:oa,documents:da,editForm:na,orderProgress:ca,orderCellCount:ua,loadOrderDetail:ma,startEditing:pa,cancelEditing:va,saveChanges:ba,deleteOrder:ya,cloneOrder:ga,getStatusText:fa,getStatusBadgeClass:wa}=N(),ka=e(!1),Da=e(!1),ha=e(!1);function Sa(){ka.value=!0}function Ta(){Da.value=!0}async function Na(){try{ha.value=!0;await ya()&&t.push({name:"Orders"}),ka.value=!1}catch(e){}finally{ha.value=!1}}async function Aa(){try{ha.value=!0;await ga()&&(Da.value=!1)}catch(e){}finally{ha.value=!1}}function Ca(e){if(!e)return"0 B";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["B","KB","MB","GB"][a]}return r((()=>{ma()})),(e,a)=>{var t,s,r,N,ma,ya,ga,Ia,Ba;const za=v("router-link");return h(),i("div",A,[d(S)?(h(),i("div",C,a[12]||(a[12]=[n("div",{class:"spinner-border text-primary",role:"status"},[n("span",{class:"visually-hidden"},"Yükleniyor...")],-1)]))):d(l)?(h(),i("div",B,[n("div",z,[n("div",null,[n("h1",null,c(d(l).orderNo),1),n("p",x," Sipariş Tarihi: "+c(new Date(d(l).orderDate).toLocaleDateString("tr-TR")),1)]),n("div",E,[d(T)?o("",!0):(h(),i("button",{key:0,onClick:a[0]||(a[0]=(...e)=>d(pa)&&d(pa)(...e)),class:"btn btn-outline-primary"},a[13]||(a[13]=[n("i",{class:"bi bi-pencil me-1"},null,-1),m(" Düzenle ")]))),d(T)?o("",!0):(h(),i("button",{key:1,onClick:Ta,class:"btn btn-outline-secondary"},a[14]||(a[14]=[n("i",{class:"bi bi-copy me-1"},null,-1),m(" Kopyala ")]))),d(T)?o("",!0):(h(),i("button",{key:2,onClick:Sa,class:"btn btn-outline-danger"},a[15]||(a[15]=[n("i",{class:"bi bi-trash me-1"},null,-1),m(" Sil ")]))),u(za,{to:{name:"Orders"},class:"btn btn-outline-secondary"},{default:p((()=>a[16]||(a[16]=[n("i",{class:"bi bi-arrow-left me-1"},null,-1),m(" Siparişler ")]))),_:1})])]),n("div",M,[n("div",O,[n("div",P,[n("div",_,[n("div",j,[a[17]||(a[17]=n("span",{class:"me-2"},"Durum:",-1)),n("span",{class:b(["badge",d(wa)(d(l).status)])},c(d(fa)(d(l).status)),3)])]),n("div",K,[n("div",V,[a[18]||(a[18]=n("span",{class:"me-2"},"İlerleme:",-1)),n("div",U,[n("div",{class:b(["progress-bar",{"bg-success":100===d(ca),"bg-info":d(ca)>=75&&d(ca)<100,"bg-primary":d(ca)>=50&&d(ca)<75,"bg-warning":d(ca)>=25&&d(ca)<50,"bg-danger":d(ca)<25}]),role:"progressbar",style:y(`width: ${d(ca)}%`),"aria-valuenow":d(ca),"aria-valuemin":"0","aria-valuemax":"100"},c(d(ca))+"% ",15,Y)])])]),n("div",F,[n("div",H,[a[19]||(a[19]=n("span",{class:"me-2"},"Öncelik:",-1)),n("span",{class:b(["badge",{"bg-danger":"high"===d(l).priority,"bg-warning":"medium"===d(l).priority,"bg-info":"low"===d(l).priority}])},c("high"===d(l).priority?"Yüksek":"medium"===d(l).priority?"Orta":"low"===d(l).priority?"Düşük":"Normal"),3)])])])])]),d(T)?(h(),i("div",R,[a[28]||(a[28]=n("div",{class:"card-header"},[n("h5",{class:"mb-0"},"Sipariş Düzenleme")],-1)),n("div",G,[n("div",L,[n("div",q,[a[20]||(a[20]=n("label",{for:"editDeliveryDate",class:"form-label"},"Teslim Tarihi",-1)),g(n("input",{type:"date",id:"editDeliveryDate","onUpdate:modelValue":a[1]||(a[1]=e=>d(na).deliveryDate=e),class:"form-control"},null,512),[[f,d(na).deliveryDate]])]),n("div",$,[a[22]||(a[22]=n("label",{for:"editPriority",class:"form-label"},"Öncelik",-1)),g(n("select",{id:"editPriority","onUpdate:modelValue":a[2]||(a[2]=e=>d(na).priority=e),class:"form-select"},a[21]||(a[21]=[n("option",{value:"high"},"Yüksek",-1),n("option",{value:"medium"},"Orta",-1),n("option",{value:"low"},"Düşük",-1)]),512),[[w,d(na).priority]])]),n("div",J,[a[24]||(a[24]=n("label",{for:"editStatus",class:"form-label"},"Durum",-1)),g(n("select",{id:"editStatus","onUpdate:modelValue":a[3]||(a[3]=e=>d(na).status=e),class:"form-select"},a[23]||(a[23]=[n("option",{value:"planned"},"Planlandı",-1),n("option",{value:"in_progress"},"Üretimde",-1),n("option",{value:"delayed"},"Gecikmiş",-1),n("option",{value:"completed"},"Tamamlandı",-1)]),512),[[w,d(na).status]])])]),n("div",Q,[n("div",W,[a[25]||(a[25]=n("label",{for:"editCustomerContact",class:"form-label"},"Müşteri İletişim",-1)),g(n("input",{type:"text",id:"editCustomerContact","onUpdate:modelValue":a[4]||(a[4]=e=>d(na).customerContact=e),class:"form-control",placeholder:"İletişim kişisi"},null,512),[[f,d(na).customerContact]])]),n("div",X,[a[26]||(a[26]=n("label",{for:"editNotes",class:"form-label"},"Notlar",-1)),g(n("textarea",{id:"editNotes","onUpdate:modelValue":a[5]||(a[5]=e=>d(na).notes=e),class:"form-control",rows:"2",placeholder:"Sipariş ile ilgili notlar"},null,512),[[f,d(na).notes]])])]),n("div",Z,[n("button",{onClick:a[6]||(a[6]=(...e)=>d(va)&&d(va)(...e)),class:"btn btn-outline-secondary"}," İptal "),n("button",{onClick:a[7]||(a[7]=(...e)=>d(ba)&&d(ba)(...e)),class:"btn btn-primary",disabled:d(S)},[d(S)?(h(),i("span",ae)):o("",!0),a[27]||(a[27]=m(" Kaydet "))],8,ee)])])])):o("",!0),n("div",te,[n("div",le,[n("div",se,[a[36]||(a[36]=n("div",{class:"card-header"},[n("h5",{class:"mb-0"},"Müşteri Bilgileri")],-1)),n("div",re,[n("div",ie,[a[29]||(a[29]=n("div",{class:"col-sm-4 fw-bold"},"Müşteri:",-1)),n("div",oe,c((null==(t=d(l).customerInfo)?void 0:t.name)||"-"),1)]),n("div",de,[a[30]||(a[30]=n("div",{class:"col-sm-4 fw-bold"},"Döküman No:",-1)),n("div",ne,c((null==(s=d(l).customerInfo)?void 0:s.documentNo)||"-"),1)]),n("div",ce,[a[31]||(a[31]=n("div",{class:"col-sm-4 fw-bold"},"Proje Adı:",-1)),n("div",ue,c((null==(r=d(l).customerInfo)?void 0:r.projectName)||"-"),1)]),n("div",me,[a[32]||(a[32]=n("div",{class:"col-sm-4 fw-bold"},"Sözleşme No:",-1)),n("div",pe,c((null==(N=d(l).customerInfo)?void 0:N.contractNo)||"-"),1)]),n("div",ve,[a[33]||(a[33]=n("div",{class:"col-sm-4 fw-bold"},"İletişim Kişisi:",-1)),n("div",be,c((null==(ma=d(l).customerInfo)?void 0:ma.contactPerson)||"-"),1)]),n("div",ye,[a[34]||(a[34]=n("div",{class:"col-sm-4 fw-bold"},"E-posta:",-1)),n("div",ge,c((null==(ya=d(l).customerInfo)?void 0:ya.contactEmail)||"-"),1)]),n("div",fe,[a[35]||(a[35]=n("div",{class:"col-sm-4 fw-bold"},"Telefon:",-1)),n("div",we,c((null==(ga=d(l).customerInfo)?void 0:ga.contactPhone)||"-"),1)])])])]),n("div",ke,[n("div",De,[n("div",he,[a[37]||(a[37]=n("h5",{class:"mb-0"},"Hücre Bilgileri",-1)),n("span",Se,c(d(ua))+" Hücre",1)]),n("div",Te,[d(l).cells&&0!==d(l).cells.length?(h(),i("div",Ae,[n("table",Ce,[a[38]||(a[38]=n("thead",null,[n("tr",null,[n("th",null,"Hücre Tipi"),n("th",null,"Teknik Değerler"),n("th",null,"Miktar"),n("th",null,"Seri No")])],-1)),n("tbody",null,[(h(!0),i(k,null,D(d(l).cells,((e,a)=>(h(),i("tr",{key:a},[n("td",null,c(e.productTypeCode),1),n("td",null,c(e.technicalValues),1),n("td",null,c(e.quantity)+" Adet",1),n("td",null,c(e.serialNumber||"-"),1)])))),128))])])])):(h(),i("div",Ne," Bu sipariş için hücre bilgisi mevcut değil. "))])])])]),n("div",Ie,[a[40]||(a[40]=n("div",{class:"card-header"},[n("h5",{class:"mb-0"},"Üretim Aşamaları")],-1)),n("div",Be,[d(oa)&&0!==d(oa).length?(h(),i("div",xe,[n("table",Ee,[a[39]||(a[39]=n("thead",null,[n("tr",null,[n("th",null,"Aşama"),n("th",null,"Durum"),n("th",null,"İlerleme"),n("th",null,"Başlangıç"),n("th",null,"Bitiş"),n("th",null,"Sorumlu")])],-1)),n("tbody",null,[(h(!0),i(k,null,D(d(oa),(e=>(h(),i("tr",{key:e.id},[n("td",null,c(e.stageName),1),n("td",null,[n("span",{class:b(["badge",{"bg-success":"completed"===e.status,"bg-primary":"in_progress"===e.status,"bg-warning":"delayed"===e.status,"bg-secondary":"not_started"===e.status}])},c("completed"===e.status?"Tamamlandı":"in_progress"===e.status?"Devam Ediyor":"delayed"===e.status?"Gecikmiş":"Başlamadı"),3)]),n("td",null,[n("div",Me,[n("div",{class:b(["progress-bar",{"bg-success":100===e.progress,"bg-info":e.progress>=75&&e.progress<100,"bg-primary":e.progress>=50&&e.progress<75,"bg-warning":e.progress>=25&&e.progress<50,"bg-danger":e.progress<25}]),role:"progressbar",style:y(`width: ${e.progress}%`),"aria-valuenow":e.progress,"aria-valuemin":"0","aria-valuemax":"100"},c(e.progress)+"% ",15,Oe)])]),n("td",null,c(e.startDate?new Date(e.startDate).toLocaleDateString("tr-TR"):"-"),1),n("td",null,c(e.endDate?new Date(e.endDate).toLocaleDateString("tr-TR"):"-"),1),n("td",null,c(e.assignedTo||"-"),1)])))),128))])])])):(h(),i("div",ze," Henüz üretim aşaması kaydedilmemiş. "))])]),n("div",Pe,[a[44]||(a[44]=n("div",{class:"card-header d-flex justify-content-between align-items-center"},[n("h5",{class:"mb-0"},"İlgili Dokümanlar"),n("button",{class:"btn btn-sm btn-outline-primary",disabled:""},[n("i",{class:"bi bi-upload me-1"}),m(" Doküman Yükle ")])],-1)),n("div",_e,[d(da)&&0!==d(da).length?(h(),i("div",Ke,[n("table",Ve,[a[43]||(a[43]=n("thead",null,[n("tr",null,[n("th",null,"Dosya Adı"),n("th",null,"Tip"),n("th",null,"Boyut"),n("th",null,"Tarih"),n("th",null,"Ekleyen"),n("th",null,"İşlemler")])],-1)),n("tbody",null,[(h(!0),i(k,null,D(d(da),(e=>{return h(),i("tr",{key:e.id},[n("td",null,c(e.fileName),1),n("td",null,c((t=e.documentType,{contract:"Sözleşme",technical:"Teknik Doküman",drawing:"Teknik Çizim",invoice:"Fatura",report:"Rapor"}[t]||t||"Diğer")),1),n("td",null,c(Ca(e.fileSize)),1),n("td",null,c(new Date(e.createdAt).toLocaleDateString("tr-TR")),1),n("td",null,c(e.createdBy),1),n("td",null,[n("a",{href:e.downloadUrl,class:"btn btn-sm btn-outline-primary me-1",title:"İndir"},a[41]||(a[41]=[n("i",{class:"bi bi-download"},null,-1)]),8,Ue),a[42]||(a[42]=n("button",{class:"btn btn-sm btn-outline-danger",title:"Sil",disabled:""},[n("i",{class:"bi bi-trash"})],-1))])]);var t})),128))])])])):(h(),i("div",je," Henüz doküman mevcut değil. "))])]),n("div",Ye,[a[45]||(a[45]=n("div",{class:"card-header"},[n("h5",{class:"mb-0"},"Notlar")],-1)),n("div",Fe,[d(l).notes?(h(),i("p",He,c(d(l).notes),1)):(h(),i("p",Re,"Sipariş ile ilgili not bulunmuyor."))])])])):(h(),i("div",I," Sipariş bulunamadı veya erişim yetkiniz yok. ")),ka.value?(h(),i("div",Ge,[n("div",Le,[n("div",qe,[n("div",$e,[a[46]||(a[46]=n("h5",{class:"modal-title"},"Sipariş Silme",-1)),n("button",{type:"button",class:"btn-close",onClick:a[8]||(a[8]=e=>ka.value=!1)})]),n("div",Je,[n("p",null,[n("strong",null,c(null==(Ia=d(l))?void 0:Ia.orderNo),1),a[47]||(a[47]=m(" numaralı siparişi silmek istediğinizden emin misiniz? "))]),a[48]||(a[48]=n("p",{class:"text-danger"},"Bu işlem geri alınamaz!",-1))]),n("div",Qe,[n("button",{type:"button",class:"btn btn-secondary",onClick:a[9]||(a[9]=e=>ka.value=!1)},"İptal"),n("button",{type:"button",class:"btn btn-danger",onClick:Na,disabled:ha.value},[ha.value?(h(),i("span",Xe)):o("",!0),a[49]||(a[49]=m(" Siparişi Sil "))],8,We)])])]),a[50]||(a[50]=n("div",{class:"modal-backdrop fade show"},null,-1))])):o("",!0),Da.value?(h(),i("div",Ze,[n("div",ea,[n("div",aa,[n("div",ta,[a[51]||(a[51]=n("h5",{class:"modal-title"},"Sipariş Kopyalama",-1)),n("button",{type:"button",class:"btn-close",onClick:a[10]||(a[10]=e=>Da.value=!1)})]),n("div",la,[n("p",null,[n("strong",null,c(null==(Ba=d(l))?void 0:Ba.orderNo),1),a[52]||(a[52]=m(" numaralı siparişi kopyalamak istediğinizden emin misiniz? "))]),a[53]||(a[53]=n("p",null,"Yeni bir sipariş numarası ile aynı içerikte bir kopya oluşturulacaktır.",-1))]),n("div",sa,[n("button",{type:"button",class:"btn btn-secondary",onClick:a[11]||(a[11]=e=>Da.value=!1)},"İptal"),n("button",{type:"button",class:"btn btn-primary",onClick:Aa,disabled:ha.value},[ha.value?(h(),i("span",ia)):o("",!0),a[54]||(a[54]=m(" Siparişi Kopyala "))],8,ra)])])]),a[55]||(a[55]=n("div",{class:"modal-backdrop fade show"},null,-1))])):o("",!0)])}}},[["__scopeId","data-v-9edbef8e"]]);export{oa as default};
